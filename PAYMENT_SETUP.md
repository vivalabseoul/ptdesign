# 나이스페이 결제 시스템 설정 가이드

## 환경 변수 설정

`.env` 파일에 다음 내용을 추가하세요:

```env
# 나이스페이 설정 (테스트용 - 나중에 실제 ID로 교체)
VITE_NICEPAY_MERCHANT_ID=test_merchant_id

# 실제 운영 시 아래 주석을 해제하고 실제 ID로 교체하세요
# VITE_NICEPAY_MERCHANT_ID=your_real_merchant_id_here
```

---

## 현재 상태 (개발 모드)

현재는 **테스트 모드**로 설정되어 있습니다:
- 나이스페이 MID 없이도 작동
- 결제 시뮬레이션 가능
- 확인 다이얼로그로 테스트

---

## 실제 결제 연동 방법

### 1단계: 나이스페이 가맹점 신청

1. [나이스페이 홈페이지](https://www.nicepay.co.kr) 접속
2. 가맹점 신청
3. 심사 완료 후 **MID(가맹점 ID)** 발급

### 2단계: 환경 변수 업데이트

`.env` 파일에서 실제 MID로 교체:

```env
# 실제 가맹점 ID로 교체
VITE_NICEPAY_MERCHANT_ID=실제_발급받은_MID
```

### 3단계: 테스트

1. 개발 서버 재시작: `npm run dev`
2. 요금제 페이지에서 결제 버튼 클릭
3. 나이스페이 결제창 확인

---

## 결제 플로우

```
사용자 → 요금제 선택 → 결제 버튼 클릭
         ↓
    로그인 확인 (미로그인 시 로그인 페이지로 이동)
         ↓
    나이스페이 결제창 오픈
         ↓
    결제 완료 → /payment/success
    결제 실패 → /payment/fail
```

---

## 테스트 방법

### 개발 모드 테스트 (현재)

1. 요금제 페이지 접속: `http://localhost:5173/pricing`
2. 원하는 플랜의 "지금 시작하기" 버튼 클릭
3. 로그인 (소셜 로그인)
4. 결제 시뮬레이션 확인 다이얼로그 확인
5. "확인" 클릭 → 결제 성공 페이지로 이동

### 실제 결제 테스트 (MID 설정 후)

1. `.env`에 실제 MID 설정
2. 개발 서버 재시작
3. 요금제 페이지에서 결제 진행
4. 나이스페이 결제창에서 테스트 카드로 결제
5. 결제 성공/실패 페이지 확인

---

## 주의사항

⚠️ **개발 모드**
- MID가 없으면 자동으로 개발 모드로 작동
- 실제 결제는 발생하지 않음
- 테스트용 시뮬레이션만 가능

⚠️ **운영 모드**
- 실제 MID 설정 필요
- 실제 결제가 발생함
- 테스트 카드로 먼저 테스트 권장

---

## 문제 해결

### Q: 결제 버튼을 눌러도 아무 반응이 없어요
A: 브라우저 콘솔을 확인하세요. 로그인이 필요할 수 있습니다.

### Q: "가맹점 ID가 없습니다" 메시지가 나와요
A: 정상입니다. 개발 모드로 작동하며 시뮬레이션이 가능합니다.

### Q: 실제 결제를 테스트하고 싶어요
A: `.env`에 실제 나이스페이 MID를 설정하고 서버를 재시작하세요.

---

## 다음 단계

1. ✅ 결제 페이지 생성 완료
2. ✅ 라우팅 설정 완료
3. 📝 개발 모드 테스트
4. 📋 나이스페이 가맹점 신청 (실제 운영 시)
5. 🔧 실제 MID로 교체 (실제 운영 시)
